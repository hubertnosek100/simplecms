app=function(){return{init:function(e,t){app.url=e,app.service.set(t),$(document).ready(function(){app.simpletext.load(e),app.simpleimage.load(e),app.simplevideo.load(e),app.modal.load(e),app.menu.load(e)})},url:void 0,debounce:function(e,t,n){var a;return function(){var i=this,o=arguments,r=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(i,o)},t),r&&e.apply(i,o)}},formToJSON:function(e){var t=e.serializeArray(),n={};return $.map(t,function(e,t){n[e.name]=e.value}),n}}}();var simplecms=app;app.database=function(){function e(e){$("#scmsDbTable").find("tbody").empty(),app.service.get("/"+$("#scmsTableSelect").val(),t)}function t(e){var t=$("#scmsDbTable").find("tbody");e.forEach(function(e){var a;t.append((a=e,$row=$("<tr></tr>"),$rmbtn=$("<button db-id='"+a.id+"' class='btn btn-danger'><i class='fas fa-trash-alt'></i></button>"),$rmbtn.on("click",n),$idColumn=$("<td></td>").text(a.id),$contentColumn=$("<td></td>").text(JSON.stringify(a)),$actionColumn=$("<td></td>").append($rmbtn),$row.append($idColumn),$row.append($contentColumn),$row.append($actionColumn),$row))})}function n(t){var n=$(t.target).attr("db-id");console.log(n);var a=$("#scmsTableSelect").val();app.service.delete("/"+a+"/"+n),e()}return{init:function(){for(let e=0;e<app.static.components.length;e++){const t=app.static.components[e];$("#scmsTableSelect").append("<option value='"+t+"'>"+t+"</option>")}app.service.get("/"+app.static.simpletext,t),$("#scmsTableSelect").on("change",e)}}}(),app.service=function(){var e="default";function t(t,n,a,i,o){o||(o="html"),$.ajax({type:a,contentType:"application/json; charset=utf-8",url:t,data:JSON.stringify(n),headers:{Apikey:e,token:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}("simplecms_token")},success:function(e){console.log("success"),i&&i(e)},error:function(e){console.log("failure"),i&&i(e)},dataType:o})}function n(e,n,a,i){t(e,n,"POST",a,i)}return{post:n,put:function(e,n){t(e,n,"PUT")},get:function(t,n,a,i){a||(a="json"),$.ajax({dataType:a,contentType:"application/json; charset=utf-8",data:JSON.stringify(i),url:t,success:n,headers:{Apikey:e}})},delete:function(e,n){t(e,n,"DELETE")},set:function(t){e=t},isAuthenticated:function(e){n(app.url+"/api/check",{},function(t){console.log(JSON.stringify(t)),e(t.succes)},"json")},login:function(e,t){n(app.url+"/api/login",e,function(e){e.token&&(function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var i="expires="+a.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}("simplecms_token",e.token,1),t(!0))},"json")}}}(),app.static={simpleimage:"simpleimage",simpletext:"simpletext",simplevideo:"simplevideo",modal:"simplemodal",components:["simpletext","simpleimage","simplevideo","exponent","template"],exponent:"exponent",template:"template",elementTypes:["text","number","date","datetime","color","link","collection"]};var buttonBuilder=function(){return{build:function(e,t){return'<a href="'+t+'" class="btn btn-primary scms-primary scms-btn">'+e+"</a>"}}}(),collectionBuilder=function(){return $(document).ready(function(){elementFactory.register("collection",collectionBuilder)}),{build:function(e,t){var n=uiBuilder.buildFormGroup(e),a=$('<form class="expo-form" id ="'+e+'"></form>');return n.append(function(e,t){var n=$('<button class="form-control btn btn-sm btn-secondary ml-2"><i class="fas fa-plus"></i></button>');return n.on("click",function(n){n.preventDefault();var a=$('<form class="expo-element"></form>');a.append(function(){var e=$('<button class="btn btn-sm btn-danger"><i class="fas fa-trash-alt"></i></button>');e.on("click",function(e){console.log(e.target),"BUTTON"===e.target.tagName?$(e.target).parent().parent().remove():$(e.target).parent().parent().parent().remove()});var t=$('<div style="margin:3px;"></div>');return t.append(e),t}()),t.length>0&&t.forEach(e=>{var t=elementFactory.build(e.type,e.name,e.items);t&&t.callback?(a.append(t.content),t.callback()):a.append(t)}),$("#"+e).append(a)}),n}(e,t)),a.append(n),a}}}(),colorBuilder=function(){return $(document).ready(function(){elementFactory.register("color",colorBuilder)}),{build:function(e){var t=uiBuilder.buildFormGroup(e),n='<input id="colorpicker'+(e=e.replace(/\s/g,""))+'" name="'+e+'" type="text" class="form-control" value="rgb(255, 128, 0)" />';return t.append(n),{content:t,callback:function(){$("#colorpicker"+e).colorpicker()}}}}}(),dateBuilder=function(){return $(document).ready(function(){elementFactory.register("date",dateBuilder)}),{build:function(e){return{content:'<div class="form-group p-2"><label>'+e+'</label><div class="input-group date" id="datetimepicker'+(e=e.replace(/\s/g,""))+'" data-target-input="nearest"><input name="'+e+'" type="text" class="form-control datetimepicker-input" data-target="#datetimepicker'+e+'"><div class="input-group-append" data-target="#datetimepicker'+e+'" data-toggle="datetimepicker"><div class="input-group-text"><i class="fa fa-calendar"></i></div></div></div></div>',callback:function(){$("#datetimepicker"+e).datetimepicker({format:"L"})}}}}}(),datetimeBuilder=function(){return $(document).ready(function(){elementFactory.register("datetime",datetimeBuilder)}),{build:function(e){return{content:'<div class="form-group p-2"><label>'+e+'</label><div class="input-group date" id="datetimepicker'+(e=e.replace(/\s/g,""))+'" data-target-input="nearest"><input name="'+e+'" type="text" class="form-control datetimepicker-input" data-target="#datetimepicker'+e+'"><div class="input-group-append" data-target="#datetimepicker'+e+'" data-toggle="datetimepicker"><div class="input-group-text"><i class="fa fa-calendar"></i></div></div></div></div>',callback:function(){$("#datetimepicker"+e).datetimepicker()}}}}}(),elementFactory=function(){var e=[];return{build:function(t,n,a){var i=e[t];if(i)return i.build(n,a)},register:function(t,n){e[t]=n}}}(),linkBuilder=function(){return $(document).ready(function(){elementFactory.register("link",linkBuilder)}),{build:function(e){var t=uiBuilder.buildFormGroup(e);return t.append('<input class="form-control " required name="'+e+'" type="text"></input>'),t}}}(),numberBuilder=function(){return $(document).ready(function(){elementFactory.register("number",numberBuilder)}),{build:function(e){var t=uiBuilder.buildFormGroup(e);return t.append('<input class="form-control" required name="'+e+'" type="number"></input>'),t}}}(),textBuilder=function(){return $(document).ready(function(){elementFactory.register("text",textBuilder)}),{build:function(e){var t=uiBuilder.buildFormGroup(e);return t.append('<input class="form-control " required name="'+e+'" type="text"></input>'),t}}}(),uiBuilder=function(){return{buildFormGroup:function(e){var t=$('<div class="form-group p-2"></div>');return t.append("<label>"+e+"</label>"),t}}}();app.menu=function(){function e(e){$("body").append(e),$("#loginForm").on("submit",function(e){e.preventDefault();var t=app.formToJSON($(e.target));app.service.login(t,a)}),$("#faviconId").attr("src",app.url+"/favicon.png")}function t(){document.getElementById("mySidenav").style.width="300px",$("body").append('<div id="backdrop" class="modal-backdrop fade show"></div>')}function n(){document.getElementById("mySidenav").style.width="0",$("#backdrop").remove()}function a(e){e?($("#loginForm").hide(),$("#loginInfo").show()):($("#loginInfo").hide(),$("#loginForm").show())}return{load:function(t){app.service.get(t+"/simplecms/components/menu.html",e,"html")},open:t,close:n,current:void 0,loginTab:function(e){app.service.isAuthenticated(a)},init:function(){$("simpletext").contextmenu(function(e){app.menuComponent(e.target),t(),e.preventDefault()}),$(document).on("keydown",function(e){27===e.keyCode&&n()})}}}(),app.menuComponent=function(e){var t=function(e,t){try{var n=JSON.parse($(e).val()),a=$('simpletext[uuid="'+t+'"]');for(var i in function(e){for(;e[0];)e[e[0]]=""}(a[0].style),n)n.hasOwnProperty(i)&&a.css(i,n[i]);app.simpletext.save({target:a[0]}),$("#componenJsonHelp").text("")}catch(e){$("#componenJsonHelp").text("Not valid Json")}},n=$(e).attr("db-id");app.simpletext.find(app.url,n,function(e){if(e.length>0){var n=e[0];app.menu.current=n,$("#componentUuid").val(n.uuid),$("#componentJsonCss").val(JSON.stringify(n.css));var a=app.debounce(t,1e3);$("#componentJsonCss").unbind(),$("#componentJsonCss").on("keyup",function(e){a(e.target,n.uuid)})}})},app.modal=function(){function e(e){$("body").append(e)}return{load:function(t){app.service.get(t+"/simplecms/components/modal.html",e,"html")},create:function(e,t,n,a,i,o){$("#simplemodal").modal(),$("#simplemodal").find("input").attr("placeholder",a),$("#simpleModalLabel").text(n),$("#simpleModalSave").unbind(),$("#simpleModalSave").on("click",function(){t[o]=$("#simplemodal").find("input").val(),t.id?app.service.put(i+"/"+t.id,t):app.service.post(i,t),$("#simplemodal").modal("hide"),e(t[o],t.uuid)})}}}(),app.dashboard=function(){function e(e){"default"!==e.apikey&&$("#apikeytext").val(e.apikey)}function t(e){var t=function(){var e="";for(let t=0;t<10;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e}();$("#apikeytext").val(t),app.service.post("/apikey/",{apikey:t})}return{init:function(){$(document).ready(function(){app.service.get("/apikey",e),$("#apikeygeneratebtn").on("click",t),app.dashboard.chart()})}}}(),app.dashboard.chart=function(){$("input[type=radio][name=when]").change(function(){console.log(this.value),"daily"===this.value?n():"monthly"===this.value?t():"yearly"===this.value&&e()});var e=function(){app.service.get("/requester?when=yearly",function(e){var t=app.dashboard.yearData(e);a(t)})},t=function(){app.service.get("/requester?when=monthly",function(e){var t=app.dashboard.monthData(e);a(t)})},n=function(){app.service.get("/requester?when=daily",function(e){var t=app.dashboard.hourData(e);a(t)})};n();var a=function(e){c3.generate({bindto:"#chart-employment",data:{columns:e.data,type:"line",colors:e.colors},axis:{x:{type:"category",categories:e.categories}},legend:{show:!0},padding:{bottom:0,top:0}})}},app.exponents=function(){function e(){app.service.get("/"+app.static.exponent,t)}function t(e){var t=$(".exponents-list");if(0===e.length){$p=$('<p class="p-3">There is no exponents. </p>');var i=buttonBuilder.build("Create new exponent","/simplecms/dashboard/newexponent");$p.append(i),t.append($p)}else{e.forEach(e=>{});var o=$('<table class="table table-hover text-center"></table>'),r=$('<thead class=""></thead>'),p=$("<tr> </tr>");p.append("<td>#ID</td>"),p.append("<td>Template</td>"),p.append("<td>Uuid</td>"),p.append("<td>Action</td>"),r.append(p),o.append(r);var l=$("<tbody></tbody>");e.forEach(e=>{l.append(function(e){return $row=$("<tr></tr>"),$rmbtn=$("<button db-id='"+e.id+"' class='btn btn-danger'><i class='fas fa-trash-alt'></i></button>"),$editbtn=$("<button db-id='"+e.id+"' data-toggle='modal' data-target='#editJsonModal'  class='btn btn-primary ml-3' style='width: 40px;'><i class='far fa-edit'></i></i></button>"),$rmbtn.on("click",n),$editbtn.on("click",a),$idColumn=$("<td></td>").text(e.id),$uuidColumn=$("<td></td>").text(e.template),$nameColumn=$("<td></td>").text(e.uuid),$actionColumn=$("<td></td>").append($rmbtn).append($editbtn),$row.append($idColumn),$row.append($uuidColumn),$row.append($nameColumn),$row.append($actionColumn),$row}(e))}),o.append(l);i=buttonBuilder.build("Create new exponent","/simplecms/dashboard/newexponent");t.append($('<div class="card"></div>').append(o)),t.append(i)}}function n(t){var n="";n="BUTTON"===t.target.tagName?$(t.target).attr("db-id"):$(t.target).parent().attr("db-id"),app.service.delete("/"+app.static.exponent+"/"+n),$(".exponents-list").empty(),e()}function a(e){var t="";t="BUTTON"===e.target.tagName?$(e.target).attr("db-id"):$(e.target).parent().attr("db-id"),app.service.get("/"+app.static.exponent+"/"+t,function(e){$("#editJsonText").val(JSON.stringify(e))})}function i(e){e.preventDefault();var t=JSON.parse($("#editJsonText").val());app.service.put("/"+app.static.exponent+"/"+t.id,t),$("#editJsonModal").modal("hide")}return{init:function(){$(document).ready(function(){e(),$("#editJsonForm").on("submit",i)})}}}();var media=function(){function e(e){var t=$(".media-list");if(0===e.length)$p=$('<p class="p-3">There is no media. </p>'),t.append($p);else{var n=$('<table class="table table-hover text-center"></table>'),a=$('<thead class=""></thead>'),i=$("<tr> </tr>");i.append("<td>name</td>"),a.append(i),n.append(a);var o=$("<tbody></tbody>");e.forEach(e=>{o.append(function(e){return $row=$("<tr></tr>"),$col=$("<td></td>").text(e),$row.append($col),$row}(e))}),n.append(o),t.append($('<div class="card"></div>').append(n))}}return{init:function(){app.service.get("/media",e)}}}();app.media=media,app.newexponent=function(){function e(e){e.preventDefault();var t=app.formToJSON($("#createexponentform"));$("#createexponentform").find("form").toArray().splice(0,1);var n=$("#createexponentform").find("form").toArray(),a=n.splice(0,1),i=$(a).attr("id");t[i]=[],n.forEach(e=>{t[i].push(app.formToJSON($(e)))}),t.templateid=$("#newtemplateselect").val(),t.template=$("#newtemplateselect option:selected").text(),app.service.post("/"+app.static.exponent,t)}function t(e){if(0===e.length){var t=$(".template-list");$p=$('<p class="p-3">You have no templates. </p>');var n=buttonBuilder.build("Create new template","/simplecms/dashboard/newtemplate");$p.append(n),t.append($p)}else e.forEach(e=>{$("#newtemplateselect").append('<option value="'+e.id+'" >'+e.name+"</option>")}),a(e[0])}function n(e){var t=$("#newtemplateselect").val();app.service.get("/"+app.static.template+"/"+t,a)}function a(e){!function(e){var t=document.getElementById(e);for(;t.firstChild;)t.removeChild(t.firstChild)}("newexponentcontent"),e.elements.length>0&&e.elements.forEach(e=>{var t=elementFactory.build(e.type,e.name,e.items);t&&t.callback?($("#newexponentcontent").append(t.content),t.callback()):$("#newexponentcontent").append(t)})}return{init:function(){$(document).ready(function(){app.service.get("/"+app.static.template,t),$("#newtemplateselect").on("change",n),$("#createexponentform").on("submit",e)})}}}(),app.newtemplate=function(){var e=[];function t(){$("#addCollectionElement").attr("disabled",!0)}function n(t){t.preventDefault();var n=app.formToJSON($("#addtemplateform"));n.elements=e,app.service.post("/"+app.static.template,n)}function a(t){t.preventDefault(),$("#addelementmodal").modal("hide");var n,a=app.formToJSON($(t.target));if(a.collection){var i=e.find(function(e){return e.name===a.collection});i.items||(i.items=[]),n=i.items}else n=e;if(n.find(function(e){return e.name===a.name})||a.collection&&"collection"===a.type)console.log("error");else{n.push(a);var o=$("<div>Name: "+a.name+"</div>"),r=$("<div>Type: "+a.type+"</div>"),p=$("<div></div>");p.append(o),p.append(r);var l=$('<button class="btn btn-sm btn-danger"><i class="fas fa-trash-alt"></i></button>');l.on("click",function(e){console.log(e.target),"BUTTON"===e.target.tagName?$(e.target).parent().parent().remove():$(e.target).parent().parent().parent().remove();var t=n.find(function(e){return e.name===a.name}),i=n.indexOf(t);i>-1&&n.splice(i,1)});var d=$('<div class="temp-action"></div>');d.append(l);var c="temp-element";"collection"===a.type&&(d.append(function(e){var t=$('<button class="btn btn-sm btn-secondary ml-2"><i class="fas fa-plus"></i></button>');return t.on("click",function(t){t.preventDefault(),$("#addCollectionElement").removeAttr("disabled"),$("#addCollectionElement").val(e),$("#addelementmodal").modal("show")}),t}(a.name)),c+=" temp-collection");var s=a.name;a.collection&&(s="collection"+a.collection);var u=$("<div id='"+s+"' class='"+c+"'></div>");if(u.append(p),u.append(d),a.collection){var m=$("#"+a.collection).find(".temp-bag");0==m.length&&(m=$('<div class="temp-bag"></div>'),$("#"+a.collection).append(m)),m.append(u)}else $("#element-list").append(u)}}$(document).ready(function(){$("#addelementform").on("submit",a),app.static.elementTypes.forEach(e=>{$("#newtemplatetypeselect").append('<option value="'+e+'">'+e+"</option>")}),$("#addtemplateform").on("submit",n),$("#openAddExponentModal").on("click",t)})}(),app.template=function(){function e(){app.service.get("/"+app.static.template,t)}function t(e){var t=$(".template-list");if(0===e.length){$p=$('<p class="p-3">You have no templates. </p>');var i=buttonBuilder.build("Create new template","/simplecms/dashboard/newtemplate");$p.append(i),t.append($p)}else{var o=$('<table class="table table-hover text-center"></table>'),r=$('<thead class=""></thead>'),p=$("<tr> </tr>");p.append("<td>#ID</td>"),p.append("<td>@uuid</td>"),p.append("<td>Name</td>"),p.append("<td>Action</td>"),r.append(p),o.append(r);var l=$("<tbody></tbody>");e.forEach(e=>{l.append(function(e){return $row=$("<tr></tr>"),$rmbtn=$("<button db-id='"+e.id+"' class='btn btn-danger'><i class='fas fa-trash-alt'></i></button>"),$editbtn=$("<button db-id='"+e.id+"' data-toggle='modal' data-target='#editJsonModal' class='btn btn-primary ml-3' style='width: 40px;'><i class='far fa-edit'></i></i></button>"),$rmbtn.on("click",n),$editbtn.on("click",a),$idColumn=$("<td></td>").text(e.id),$uuidColumn=$("<td></td>").text(e.uuid),$nameColumn=$("<td></td>").text(e.name),$actionColumn=$("<td></td>").append($rmbtn).append($editbtn),$row.append($idColumn),$row.append($uuidColumn),$row.append($nameColumn),$row.append($actionColumn),$row}(e))}),o.append(l);i=buttonBuilder.build("Create new template","/simplecms/dashboard/newtemplate");t.append($('<div class="card"></div>').append(o)),t.append(i)}}function n(t){var n="";n="BUTTON"===t.target.tagName?$(t.target).attr("db-id"):$(t.target).parent().attr("db-id"),app.service.delete("/"+app.static.template+"/"+n),$(".template-list").empty(),e()}function a(e){var t="";t="BUTTON"===e.target.tagName?$(e.target).attr("db-id"):$(e.target).parent().attr("db-id"),app.service.get("/"+app.static.template+"/"+t,function(e){$("#editJsonText").val(JSON.stringify(e))})}function i(e){e.preventDefault();var t=JSON.parse($("#editJsonText").val());app.service.put("/"+app.static.template+"/"+t.id,t),$("#editJsonModal").modal("hide")}return{init:function(){$(document).ready(function(){e(),$("#editJsonForm").on("submit",i)})}}}(),app.simpleimage=function(){function e(e){e.forEach(function(e){$simpleimage=$(app.static.simpleimage+"[uuid='"+e.uuid+"'"),$simpleimage.attr("db-id",e.id),""!==e.url&&($simpleimage.find("img").attr("src",e.url),$simpleimage.find("img").removeClass("default")),$simpleimage.find("img").unbind(),$simpleimage.find("img").on("click",function(){app.modal.create(t,{id:e.id,uuid:e.uuid},"Set image url","Image url...",app.url+"/simpleimage","url")})})}function t(e,t){$element=$(app.static.simpleimage+"[uuid='"+t+"'"),$element.find("img").attr("src",e),""!==e?$element.find("img").removeClass("default"):$element.find("img").addClass("default")}return{load:function(n){app.service.get(n+"/"+app.static.simpleimage,e),$simpleimages=$(app.static.simpleimage),$simpleimages.each(function(e,n){$(n).append("<img class='pointer default' src='"+n.url+"'/>");var a=$(n).attr("class");$(n).find("img").attr("class",a),$(n).find("img").unbind(),$(n).find("img").on("click",function(){app.modal.create(t,{uuid:$(n).attr("uuid")},"Set image url","Image url...",app.url+"/simpleimage","url")})})}}}(),app.simpletext=function(){function e(e){var t=$(e.target).text(),n=$(e.target).attr("uuid"),a=$(e.target).attr("db-id"),i=function(e){var t={},n=(e.style[0],0);for(;e.style[n];)t[e.style[n]]=e.style[e.style[n]],n++;return t}(e.target);a?app.service.put(app.url+"/"+app.static.simpletext+"/"+a,{id:a,uuid:n,text:t,css:i}):app.service.post(app.url+"/"+app.static.simpletext,{uuid:n,text:t,css:i})}function t(e){e.forEach(function(e){$simpletext=$(app.static.simpletext+"[uuid='"+e.uuid+"'"),$simpletext.text(e.text),$simpletext.attr("db-id",e.id);var t=e.css;for(var n in t)t.hasOwnProperty(n)&&$simpletext.css(n,t[n])})}return{load:function(n){var a,i;app.service.get(n+"/"+app.static.simpletext,t),a={shift:!1,ctrl:!1,e:!1},i=!1,$(document.body).keydown(function(t){16==t.keyCode?a.shift=!0:17==t.keyCode?a.ctrl=!0:69==t.keyCode&&(a.e=!0),a.shift&&a.ctrl&&a.e&&(i||(i=!0,$simpletexts=$(app.static.simpletext),$simpletexts.each(function(t,n){$(n).attr("contenteditable",!0),$(n).attr("data-placeholder","Insert text here...");var a=app.debounce(e,1e3);$(n).on("keyup",function(e,t){a(e,t)})}),app.menu.init()))}),$(document.body).keyup(function(e){16==e.keyCode?a.shift=!1:17==e.keyCode?a.ctrl=!1:69==e.keyCode&&(a.e=!1)})},find:function(e,t,n){app.service.get(e+"/"+app.static.simpletext+"?id="+t,n)},save:e}}(),app.simplevideo=function(){function e(e){e.forEach(function(e){$simplevideo=$(app.static.simplevideo+"[uuid='"+e.uuid+"'"),$simplevideo.attr("db-id",e.id),""!==e.url&&($simplevideo.find("video").attr("src",e.url),$simplevideo.find("video").removeClass("default")),$simplevideo.find("video").unbind(),$simplevideo.find("video").on("click",function(){app.modal.create(t,{id:e.id,uuid:e.uuid},"Set video url","Video url...",app.url+"/simplevideo","url")})})}function t(e,t){$element=$(app.static.simplevideo+"[uuid='"+t+"'"),$element.find("video").attr("src",e),""!==e?$element.find("video").removeClass("default"):$element.find("video").addClass("default")}return{load:function(n){app.service.get(n+"/"+app.static.simplevideo,e),$simplevideos=$(app.static.simplevideo),$simplevideos.each(function(e,n){$(n).append("<video controls class='pointer default' src='"+n.url+"'/>");var a=$(n).attr("class");$(n).find("video").attr("class",a),$(n).find("video").unbind(),$(n).find("video").on("click",function(){app.modal.create(t,{uuid:$(n).attr("uuid")},"Set video url","Video url...",app.url+"/simplevideo","url")})})}}}(),app.dashboard.hourData=function(e){var t=[],n=[],a={},i=[tabler.colors.orange,tabler.colors.blue,tabler.colors.green,tabler.colors.red,tabler.colors.yellow,tabler.colors.purple];for(var o in e)if(e.hasOwnProperty(o))for(var r in e[o])if(e[o].hasOwnProperty(r)&&-1===t.indexOf(r)){t.push(r);var p=[];p.push(r),n.push(p),a[r]=i[t.length]}var l=[],d={};for(let e=0;e<t.length;e++)d[t[e]]=0;var c={},s=new Date;for(let t=0;t<s.getHours()+1;t++){o=s.getMonth()+1+"/"+s.getDate()+"/"+s.getFullYear()+"."+t;e.hasOwnProperty(o)?c[o]=e[o]:c[o]=d}for(var o in c)if(l.push(o.slice(9,11)),c.hasOwnProperty(o))for(let e=0;e<t.length;e++){var u=0;c[o].hasOwnProperty(t[e])&&(u=c[o][t[e]]),n[e].push(u)}return{categories:l,colors:a,data:n}},app.dashboard.monthData=function(e){var t=[],n=[],a={},i=[tabler.colors.orange,tabler.colors.blue,tabler.colors.green,tabler.colors.red,tabler.colors.yellow,tabler.colors.purple],o={};for(var r in e)if(e.hasOwnProperty(r))for(var p in e[r])if(e[r].hasOwnProperty(p)){if(-1===t.indexOf(p)){t.push(p);var l=[];l.push(p),n.push(l),a[p]=i[t.length]}var d=r.split("/")[1];o[d]||(o[d]={}),o[d][p]?o[d][p]=e[r][p]+o[d][p]:o[d][p]=e[r][p]}var c=[],s={};for(let e=0;e<t.length;e++)s[t[e]]=0;var u={},m=new Date;for(let e=0;e<m.getDate()+1;e++)o.hasOwnProperty(e)?u[e]=o[e]:u[e]=s;for(var r in u)if(c.push(r),u.hasOwnProperty(r))for(let e=0;e<t.length;e++){var f=0;u[r].hasOwnProperty(t[e])&&(f=u[r][t[e]]),n[e].push(f)}return{categories:c,colors:a,data:n}},app.dashboard.yearData=function(e){var t=[],n=[],a={},i=[tabler.colors.orange,tabler.colors.blue,tabler.colors.green,tabler.colors.red,tabler.colors.yellow,tabler.colors.purple],o={};for(var r in e)if(e.hasOwnProperty(r))for(var p in e[r])if(e[r].hasOwnProperty(p)){if(-1===t.indexOf(p)){t.push(p);var l=[];l.push(p),n.push(l),a[p]=i[t.length]}var d=r.split("/")[0];o[d]||(o[d]={}),o[d][p]?o[d][p]=e[r][p]+o[d][p]:o[d][p]=e[r][p]}var c=[],s={};for(let e=0;e<t.length;e++)s[t[e]]=0;var u={},m=new Date;for(let e=1;e<m.getMonth()+2;e++)o.hasOwnProperty(e)?u[e]=o[e]:u[e]=s;for(var r in u)if(c.push(r),u.hasOwnProperty(r))for(let e=0;e<t.length;e++){var f=0;u[r].hasOwnProperty(t[e])&&(f=u[r][t[e]]),n[e].push(f)}return{categories:c,colors:a,data:n}};